<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE pelican>

<configuration version="1.0">
  <pipeline>
    <clients>
      <PelicanServerClient>
        <server host="127.0.0.1" port="2000"/>
        <data type="StreamBlob" adapter="StreamAdapter"/>
        <data type="ServiceBlob" adapter="ServiceAdapter"/>
      </PelicanServerClient>
    </clients>

    <adapters>
      <StreamAdapter>
        <antennae amount="288"/>
      </StreamAdapter>
      <ServiceAdapter>
        <!-- No specific settings -->
      </ServiceAdapter>
    </adapters>

    <modules>
      <Flagger>
        <deviation multiplier="4.0"/>
      </Flagger>

      <Calibrator>
        <uvw path="../data/uvw_merged.txt"/>
        <positrf path="../data/posITRF.dat"/>
        <lba type="1"/> <!-- 0 = LBA_INNER, 1 = LBA_OUTER -->
      </Calibrator>

      <Imager>
        <output path="/home/fhuizing/Workspace/Aartfaac/data/output"/>
        <positrf path="../data/posITRF.dat"/>
        <uvw path="../data/uvw_merged.txt"/>
        <lba type="1"/> <!-- 0 = LBA_INNER, 1 = LBA_OUTER -->
      </Imager>
    </modules>

    <output>
      <streamers>
        <Visibilities active="false">
          <output path="/home/fhuizing/Workspace/Aartfaac/data/output"/>
          <uvw path="../data/uvw_merged.txt"/>
          <lba type="1"/> <!-- 0 = LBA_INNER, 1 = LBA_OUTER -->
        </Visibilities>
        <TiffStorage active="false">
          <output path="/home/fhuizing/Workspace/Aartfaac/data/output"/>
        </TiffStorage>
        <CasaImageStorage active="true">
          <output path="/home/fhuizing/Workspace/Aartfaac/data/output"/>
        </CasaImageStorage>
      </streamers>
      <dataStreams>
        <stream name="calibrated" listeners="Visibilities"/>
        <stream name="post" listeners="TiffStorage"/>
        <stream name="post" listeners="CasaImageStorage"/>
      </dataStreams>
    </output>
  </pipeline>
</configuration>
